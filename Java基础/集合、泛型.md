# 1. Java集合框架

## 1.1集合概述

**集合**：集合是java中提供的一种容器，可以用来存储多个数据。

- 面向对象语言对事物的体现都是以对象的形式，为了方便对多个对象的操作，就要对对象进行存储。使用Array存储对象具有一些**弊端**，而Java 集合就像一种容器，可以动态地把多个对象的引用放入容器中。
  - **数组在内存存储方面的特点**
    1. 数组初始化以后，长度就确定了。
    2. 数组声明的类型，就决定了进行元素初始化时的类型
  - **数组在存储数据方面的弊端：**
    1. 数组初始化以后，长度就不可变了，不便于扩展
    2. 数组中提供的属性和方法少，不便于进行添加、删除、插入等操作，且效率不高。同时无法直接获取存储元素的个数。
    3. 数组存储的数据是有序的、可以重复的。---->存储数据的特点单一
- Java 集合类可以用于存储数量不等的多个**对象**，还可用于保存具有映射关系的关联数组。
- 在 Java5 之前，Java 集合会丢失容器中所有对象的数据类型，把所有对象都当成 Object 类型处理；从 JDK 5.0 增加了**泛型**以后，Java 集合可以记住容器中对象的数据类型。

**集合和数组既然都是容器，它们有啥区别呢？** 

- 数组的长度是固定的。集合的长度是可变的。 

- 数组中存储的是同一类型的元素，可以存储基本数据类型值。集合存储的都是对象。而且对象的类型可以不 一致。在开发中一般当对象多的时候，使用集合进行存储。 

## 1.2集合框架

集合按照其存储结构可以分为两大类，分别是单列集合 java.util.Collection 和双列集合 java.util.Map 

- **Collection**：单列集合类的根接口，用于存储一系列符合某种规则的元素，它有两个重要的子接口，分别是 java.util.List 和 java.util.Set 。其中， List 的特点是元素有序、元素可重复。 Set 的特点是元素无 序，而且不可重复。 List 接口的主要实现类有 java.util.ArrayList 和 java.util.LinkedList ， Set 接口 的主要实现类有 java.util.HashSet 和 java.util.TreeSet 。 
- 

Collection接口框架图：

![image-20200801184604328](集合、泛型.assets/image-20200801184604328.png)

集合本身是一个工具，它存放在java.util包中。在 Collection 接口定义着单列集合框架中最最共性的内容。 

-  **Map**接口：双列数据，保存具有映射关系“key-value对”的集合

![image-20200801201436214](集合、泛型.assets/image-20200801201436214.png)

# 2. Collection接口方法

1、添加

- add(Object obj) ：把给定的对象添加到当前集合中 

- addAll(Collection coll) 

2、获取有效元素的个数

- int size()

3、清空集合

- void clear()

4、是否是空集合 

- boolean isEmpty()

5、是否包含某个元素

- boolean contains(Object obj)：是通过元素的equals方法来判断是否是同一个对象

- boolean containsAll(Collection c)：也是调用元素的equals方法来比较的。拿两个集合的元素挨个比较。

6、删除

- boolean remove(Object obj) ：通过元素的equals方法判断是否是要删除的那个元素。只会删除找到的第一个元素

- boolean removeAll(Collection coll)：取当前集合的差集

7、取两个集合的交集

- boolean retainAll(Collection c)：把交集的结果存在当前集合中，不影响c 

8、集合是否相等

- boolean equals(Object obj)

9、转成对象数组

- Object[] toArray()

10、获取集合对象的哈希值

- hashCode()

11、遍历

- iterator()：返回迭代器对象，用于集合遍历

# 3. Iterator迭代器接口

## 3.1Iterator接口

**迭代**：即Collection集合元素的通用获取方式。在取元素之前先要判断集合中有没有元素，如果有，就把这个 元素取出来，继续在判断，如果还有就再取出出来。一直把集合中的所有元素全部取出。这种取出方式专业 术语称为迭代。 

- 在程序开发中，经常需要遍历集合中的所有元素。针对这种需求，JDK专门提供了一个接口 `java.util.Iterator` 

- Iterator对象称为迭代器(设计模式的一种)，主要用于遍历 Collection 集合中的元素。
- GOF给迭代器模式的定义为：提供一种方法访问一个容器(container)对象中各个元素，而又不需暴露该对象的内部细节。**迭代器模式，就是为容器而生。**类似于“公交车上的售票员”、“火车上的乘务员”、“空姐”。 

-  Collection接口继承了java.lang.Iterable接口，该接口有一个iterator()方法，那么所有实现了Collection接口的集合类都有一个iterator()方法，用以返回一个实现了Iterator接口的对象。 

  获取迭代器的方法： `public Iterator iterator()` 获取集合对应的迭代器，用来遍历集合中的元素的

- Iterator 仅用于遍历集合，Iterator 本身并不提供承装对象的能力。如果需要创建Iterator 对象，则必须有一个被迭代的集合。

- 集合对象每次调用iterator()方法都得到一个全新的迭代器对象，默认游标都在集合的第一个元素之前。

- Iterator接口的常用方法

  - public E next() :返回迭代的下一个元素。 

  - public boolean hasNext() :如果仍有元素可以迭代，则返回 true。

  - public void remove():删除集合中的元素。

    ```java
    Iterator iter = coll.iterator();//回到起点
    while(iter.hasNext()){
        Object obj = iter.next();
        if(obj.equals("Tom")){
        	iter.remove();
        }
    }
    ```

    > 注意：
    >
    > - Iterator可以删除集合的元素，但是是遍历过程中通过迭代器对象的remove方 法，不是集合对象的remove方法。 
    >
    > - 如果还未调用next()或在上一次调用 next 方法之后已经调用了 remove 方法，再调用remove都会报IllegalStateException

## 3.2迭代器的执行原理

- 当遍历集合时，首先通过调用t集合的iterator()方法获得 迭代器对象，然后使用hashNext()方法判断集合中是否存在下一个元素，如果存在，则调用next()方法将元素取 出，否则说明已到达了集合末尾，停止遍历素。
- Iterator迭代器对象在遍历集合时，内部采用指针的方式来跟踪集合中的元素，

![image-20200801210239897](集合、泛型.assets/image-20200801210239897.png)

在调用Iterator的next方法之前，迭代器的索引位于第一个元素之前，不指向任何元素，当第一次调用迭代器的 next方法后，迭代器的索引会向后移动一位，指向第一个元素并将该元素返回，当再次调用next方法时，迭代器的 索引会指向第二个元素并将该元素返回，依此类推，直到hasNext方法返回false，表示到达了集合的末尾，终止对 元素的遍历。

> 在调用next()方法之前必须要调用hasNext()进行检测。若不调用，且下一条记录无效，直接调用next()会抛出NoSuchElementException异常。

# 4. Collection子接口一：List

## 4.1 List接口概述

- 鉴于Java中数组用来存储数据的局限性，我们通常使用List替代数组

- List集合类中**元素有序、且可重复**，集合中的每个元素都有其对应的顺序索引。

- List容器中的元素都对应一个整数型的序号记载其在容器中的位置，可以根据序号存取容器中的元素。

- JDK API中List接口的实现类常用的有：ArrayList、LinkedList和Vector。

## 4.2 List接口方法

List除了从Collection集合继承的方法外，List 集合里添加了一些根据索引来操作集合元素的方法。 

- **void add(int index, Object ele)**:在index位置插入ele元素

- **boolean addAll(int index, Collection eles):**从index位置开始将eles中的所有元素添加进来

- **Object get(int index):**获取指定index位置的元素

- **int indexOf(Object obj):**返回obj在集合中首次出现的位置

- **int lastIndexOf(Object obj):**返回obj在当前集合中末次出现的位置

- **Object remove(int index):**移除指定index位置的元素，并返回此元素

- **Object set(int index, Object ele):**设置指定index位置的元素为ele

- **List subList(int fromIndex, int toIndex):**返回从fromIndex到toIndex位置的子集合

## 4.3 List实现类之一：ArrayList



## 4.4 List实现类之二：LinkedList



## 4.5 List实现类之三：Vector





# 5. Collection子接口二：Set

- 



# 6. Map接口



# 7. Collections工具类

# 8. 泛型